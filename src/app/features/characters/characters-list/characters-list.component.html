<section class="characters-section">
  <div class="container">
    <h2 class="section-title">Personajes de Rick & Morty</h2>

    <app-search-bar (searchChange)="onSearch($event)"></app-search-bar>

    <!-- Estado: Cargando -->
    <app-loader *ngIf="loading" message="Cargando personajes..."></app-loader>

    <!-- Estado: Error -->
    <app-error-state
      *ngIf="error && !loading"
      title="Error al cargar personajes"
      [message]="errorMessage"
      (retry)="retry()"
    ></app-error-state>

    <!-- Estado: Sin resultados -->
    <app-empty-state
      *ngIf="!loading && !error && characters.length === 0"
      title="No se encontraron personajes"
      message="Intenta con otro nombre"
    ></app-empty-state>

    <!-- Estado: Lista de personajes -->
    <div *ngIf="!loading && !error && characters.length > 0">
      <div class="characters-grid">
        <app-character-card
          *ngFor="let character of characters; trackBy: trackByCharacterId"
          [character]="character"
        ></app-character-card>
      </div>

      <app-paginator
        [currentPage]="currentPage"
        [totalPages]="totalPages"
        [hasNext]="!!nextUrl"
        [hasPrev]="!!prevUrl"
        (pageChange)="onPageChange($event)"
      ></app-paginator>
    </div>
  </div>
</section>
